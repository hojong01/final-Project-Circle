<?xml version="1.0" encoding="UTF-8" ?>

<!-- DTD 선언 -->
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mapper라는 영역 안에 구문을 작성한다 - namespace : mapper간의 충돌을 방지 하기 위한 이름 (필수) -->
<mapper namespace="post">



	<!-- TEST -->

	<!-- 게시판 메인 불러오기 -->

	<select id="postMain" resultType="post">

		select *
		from post p, emp_info e, post_type t
		where p.post_emp =
		e.emp_info_emp_no
		and p.post_type = t.post_type_code
		and p.post_type in
		('POTY000002', 'POTY000003')
		order by p.post_code desc
	</select>
	
	<select id="postParts" parameterType="String" resultType="post">
  	select *
		from post p
		join emp_info e on (p.post_emp = e.emp_info_emp_no)
		join post_type t on (p.post_type = t.post_type_code)
		where t.post_type_code = #{post_type}
		order by p.post_code desc;
	</select>
	
	
	

	


	<select id="postTestView" resultType="post">

		select *
		from post p
		join
		post_repl r on (p.post_code = r.post_repl_post)
		join post_type t on
		(p.post_type = t.post_type_code)
		join emp_info e on (p.post_emp =
		e.emp_info_emp_no)
	</select>

	<!-- TEST END -->





	<!-- postList 호출 -->
	<select id="postList" resultType="post">
		select *
		from post p, emp_info
		e, post_type t
		where p.post_emp = e.emp_info_emp_no
		and p.post_type =
		t.post_type_code
		order by post_code desc
	</select>


	<select id="post_seq" resultType="String">
		select post_seq.nextval from
		dual
	</select>

	<insert id="postTestInsert" parameterType="post">

		INSERT INTO
		POST(POST_CODE, POST_EMP, POST_TYPE, POST_TITLE, POST_COMT,
		POST_WDAT,
		POST_MDAT, POST_CVP, POST_SEC, POST_NOTI, POST_CODE_REF,
		POST_STAT)
		VALUES(
		#{post_code}, #{post_emp}, #{post_type}, #{post_title},
		#{post_comt}, DEFAULT , '',
		0, #{post_sec}, DEFAULT, '', DEFAULT)
	</insert>

	<!-- postCollect -->




	<!-- 호출 끝 -->


	<!-- 페이징 처리 파트 페이징 처리 <select id="postCount" resultType="int"> select count(*) 
		from post </select> 페이징 처리 후 게시글 조회 <select id="selectPost" resultType="postPaging"> 
		select * from ( select rownum rn, a.* ) from ( select * from post p, emp_info 
		e, post_type t where p.post_emp = e.emp_info_emp_no and p.post_type = t.post_type_code 
		order by post_code desc ) a where rn between #{start} and #{end} </select> 
		페이징 처리 끝 -->









</mapper>